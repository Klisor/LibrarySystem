# å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ - è®¾è®¡æ–‡æ¡£

## ğŸ“‹ ä¸€ã€æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡

### 1. ç”¨æˆ·è¡¨ (users)

| å­—æ®µå           | ç±»å‹                 | çº¦æŸ                                | è¯´æ˜         |
| ---------------- | -------------------- | ----------------------------------- | ------------ |
| id               | BIGINT               | PRIMARY KEY, AUTO_INCREMENT         | ä¸»é”®ID       |
| username         | VARCHAR(50)          | UNIQUE, NOT NULL                    | ç”¨æˆ·å       |
| password         | VARCHAR(255)         | NOT NULL                            | å¯†ç          |
| email            | VARCHAR(100)         | UNIQUE, NOT NULL                    | é‚®ç®±         |
| role             | ENUM('ADMIN','USER') | DEFAULT 'USER'                      | è§’è‰²         |
| max_borrow_count | INT                  | DEFAULT 5                           | æœ€å¤§å€Ÿé˜…æ•°é‡ |
| borrowed_count   | INT                  | DEFAULT 0                           | å½“å‰å€Ÿé˜…æ•°é‡ |
| created_at       | TIMESTAMP            | DEFAULT CURRENT_TIMESTAMP           | åˆ›å»ºæ—¶é—´     |
| updated_at       | TIMESTAMP            | DEFAULT CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´     |

### 2. ä¹¦ç±è¡¨ (books) - æ–°å¢æ•°å­—åˆ†ç±»å­—æ®µ

| å­—æ®µå           | ç±»å‹         | çº¦æŸ                                | è¯´æ˜         |
| ---------------- | ------------ | ----------------------------------- | ------------ |
| id               | BIGINT       | PRIMARY KEY, AUTO_INCREMENT         | ä¸»é”®ID       |
| isbn             | VARCHAR(20)  | UNIQUE, NOT NULL                    | ISBNå·       |
| title            | VARCHAR(255) | NOT NULL                            | ä¹¦å         |
| author           | VARCHAR(255) | NOT NULL                            | ä½œè€…         |
| publisher        | VARCHAR(255) |                                     | å‡ºç‰ˆç¤¾       |
| publish_year     | INT          |                                     | å‡ºç‰ˆå¹´ä»½     |
| category         | TINYINT      | NOT NULL DEFAULT 10                 | åˆ†ç±»ID(1-10) |
| total_copies     | INT          | DEFAULT 1                           | æ€»å‰¯æœ¬æ•°     |
| available_copies | INT          | DEFAULT 1                           | å¯ç”¨å‰¯æœ¬æ•°   |
| location         | VARCHAR(100) |                                     | å­˜æ”¾ä½ç½®     |
| description      | TEXT         |                                     | æè¿°         |
| created_at       | TIMESTAMP    | DEFAULT CURRENT_TIMESTAMP           | åˆ›å»ºæ—¶é—´     |
| updated_at       | TIMESTAMP    | DEFAULT CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´     |

### 3. å€Ÿé˜…è®°å½•è¡¨ (borrow_records)

| å­—æ®µå          | ç±»å‹                                         | çº¦æŸ                                | è¯´æ˜         |
| --------------- | -------------------------------------------- | ----------------------------------- | ------------ |
| id              | BIGINT                                       | PRIMARY KEY, AUTO_INCREMENT         | ä¸»é”®ID       |
| user_id         | BIGINT                                       | FOREIGN KEY (users.id)              | ç”¨æˆ·ID       |
| book_id         | BIGINT                                       | FOREIGN KEY (books.id)              | ä¹¦ç±ID       |
| borrow_date     | TIMESTAMP                                    | DEFAULT CURRENT_TIMESTAMP           | å€Ÿé˜…æ—¥æœŸ     |
| due_date        | TIMESTAMP                                    | NOT NULL                            | åº”è¿˜æ—¥æœŸ     |
| return_date     | TIMESTAMP                                    | NULL                                | å®é™…å½’è¿˜æ—¥æœŸ |
| renewed_count   | INT                                          | DEFAULT 0                           | ç»­å€Ÿæ¬¡æ•°     |
| max_renew_count | INT                                          | DEFAULT 1                           | æœ€å¤§ç»­å€Ÿæ¬¡æ•° |
| status          | ENUM('BORROWED','RETURNED','OVERDUE','LOST') | DEFAULT 'BORROWED'                  | å€Ÿé˜…çŠ¶æ€     |
| created_at      | TIMESTAMP                                    | DEFAULT CURRENT_TIMESTAMP           | åˆ›å»ºæ—¶é—´     |
| updated_at      | TIMESTAMP                                    | DEFAULT CURRENT_TIMESTAMP ON UPDATE | æ›´æ–°æ—¶é—´     |



## äºŒã€RESTful API æ¥å£è®¾è®¡ï¼ˆå‰ç«¯åˆ†é¡µï¼‰

### 1. é€šç”¨å“åº”æ ¼å¼

```json
{
  "code": 200,        // çŠ¶æ€ç ï¼š200æˆåŠŸï¼Œ400å®¢æˆ·ç«¯é”™è¯¯ï¼Œ401æœªæˆæƒï¼Œ403ç¦æ­¢è®¿é—®ï¼Œ404æœªæ‰¾åˆ°ï¼Œ500æœåŠ¡å™¨é”™è¯¯
  "message": "æ“ä½œæˆåŠŸ", // å“åº”æ¶ˆæ¯
  "data": {},         // å“åº”æ•°æ®ï¼ˆæ ¹æ®æ¥å£ä¸åŒè€Œå˜åŒ–ï¼‰
  "timestamp": "2024-01-01T00:00:00.000Z" // å“åº”æ—¶é—´æˆ³
}
```

### 2. åˆ—è¡¨æ¥å£å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "æˆåŠŸ",
  "data": [          // ç›´æ¥è¿”å›æ•°æ®åˆ—è¡¨ï¼Œå‰ç«¯è‡ªè¡Œåˆ†é¡µ
    { /* æ•°æ®å¯¹è±¡1 */ },
    { /* æ•°æ®å¯¹è±¡2 */ },
    // ...
  ],
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

## 1. ç”¨æˆ·ç®¡ç†æ¥å£

### 1.1 å…¬å¼€æ³¨å†Œæ¥å£

| æ–¹æ³• | ç«¯ç‚¹                  | æƒé™ | æè¿°                           | è¯·æ±‚ä½“æ ¼å¼                                                   | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | --------------------- | ---- | ------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| POST | `/api/users/register` | å…¬å¼€ | ç”¨æˆ·æ³¨å†Œï¼ˆåªèƒ½æ³¨å†Œä¸ºæ™®é€šç”¨æˆ·ï¼‰ | `{"username":"ç”¨æˆ·å(3-20å­—ç¬¦)","password":"å¯†ç (6-20å­—ç¬¦)","email":"é‚®ç®±"}` | username: ç”¨æˆ·å(å¿…å¡«ï¼Œ3-20å­—ç¬¦)<br>password: å¯†ç (å¿…å¡«ï¼Œ6-20å­—ç¬¦)<br>email: é‚®ç®±(å¿…å¡«ï¼Œæœ‰æ•ˆé‚®ç®±æ ¼å¼) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æ³¨å†ŒæˆåŠŸ","data":{"id":1,"username":"test","email":"test@example.com","role":"USER","maxBorrowCount":5,"borrowedCount":0,"createdAt":"2024-01-01T00:00:00.000Z"},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç”¨æˆ·åå·²å­˜åœ¨:<br>`{"code":400,"message":"ç”¨æˆ·åå·²å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>é‚®ç®±å·²å­˜åœ¨:<br>`{"code":400,"message":"é‚®ç®±å·²å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å‚æ•°é”™è¯¯:<br>`{"code":400,"message":"ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä¸ªå­—ç¬¦ä¹‹é—´","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 1.2 ç®¡ç†å‘˜æ·»åŠ ç”¨æˆ·æ¥å£

| æ–¹æ³• | ç«¯ç‚¹         | æƒé™  | æè¿°                         | è¯·æ±‚ä½“æ ¼å¼                                                   | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | ------------ | ----- | ---------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| POST | `/api/users` | ADMIN | ç®¡ç†å‘˜æ·»åŠ ç”¨æˆ·ï¼ˆå¯é€‰æ‹©è§’è‰²ï¼‰ | `{"username":"ç”¨æˆ·å","password":"å¯†ç ","email":"é‚®ç®±","role":"USER"}` | username: ç”¨æˆ·å(å¿…å¡«ï¼Œ3-20å­—ç¬¦)<br>password: å¯†ç (å¿…å¡«ï¼Œ6-20å­—ç¬¦)<br>email: é‚®ç®±(å¿…å¡«)<br>role: è§’è‰²(å¯é€‰ï¼ŒUSERæˆ–ADMINï¼Œé»˜è®¤USER) | æˆåŠŸå“åº”ï¼ˆæ·»åŠ ç®¡ç†å‘˜ï¼‰:<br>`{"code":200,"message":"ç”¨æˆ·æ·»åŠ æˆåŠŸ","data":{"id":2,"username":"admin","email":"admin@example.com","role":"ADMIN","maxBorrowCount":5,"borrowedCount":0,"createdAt":"2024-01-01T00:00:00.000Z"},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æˆåŠŸå“åº”ï¼ˆæ·»åŠ æ™®é€šç”¨æˆ·ï¼‰:<br>`{"code":200,"message":"ç”¨æˆ·æ·»åŠ æˆåŠŸ","data":{"id":3,"username":"user2","email":"user2@example.com","role":"USER","maxBorrowCount":5,"borrowedCount":0,"createdAt":"2024-01-01T00:00:00.000Z"},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç”¨æˆ·åå·²å­˜åœ¨:<br>`{"code":400,"message":"ç”¨æˆ·åå·²å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>è§’è‰²é”™è¯¯:<br>`{"code":400,"message":"è§’è‰²å¿…é¡»æ˜¯USERæˆ–ADMIN","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 1.3 ç”¨æˆ·ç™»å½•æ¥å£

| æ–¹æ³• | ç«¯ç‚¹              | æƒé™ | æè¿°     | è¯·æ±‚ä½“æ ¼å¼                                                   | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | ----------------- | ---- | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| POST | `/api/auth/login` | å…¬å¼€ | ç”¨æˆ·ç™»å½• | `{"username":"ç”¨æˆ·å","password":"å¯†ç "}` æˆ– `{"email":"é‚®ç®±","password":"å¯†ç "}` | username: ç”¨æˆ·å(ä¸emailäºŒé€‰ä¸€)<br>email: é‚®ç®±(ä¸usernameäºŒé€‰ä¸€)<br>password: å¯†ç (å¿…å¡«) | ç™»å½•æˆåŠŸå“åº”:<br>`{"code":200,"message":"ç™»å½•æˆåŠŸ","data":{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","expiresIn":86400,"user":{"id":1,"username":"test","email":"test@example.com","role":"USER","maxBorrowCount":5,"borrowedCount":2}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯:<br>`{"code":400,"message":"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç”¨æˆ·ä¸å­˜åœ¨:<br>`{"code":404,"message":"ç”¨æˆ·ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å‚æ•°é”™è¯¯:<br>`{"code":400,"message":"è¯·æä¾›ç”¨æˆ·åæˆ–é‚®ç®±å’Œå¯†ç ","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 1.4 è·å–ç”¨æˆ·åˆ—è¡¨æ¥å£ï¼ˆå‰ç«¯åˆ†é¡µï¼‰

| æ–¹æ³• | ç«¯ç‚¹         | æƒé™  | æè¿°         | è¯·æ±‚å‚æ•°                                | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | ------------ | ----- | ------------ | --------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| GET  | `/api/users` | ADMIN | è·å–ç”¨æˆ·åˆ—è¡¨ | `username=test&email=example&role=USER` | username: ç”¨æˆ·åæœç´¢(å¯é€‰)<br>email: é‚®ç®±æœç´¢(å¯é€‰)<br>role: è§’è‰²ç­›é€‰(å¯é€‰ï¼ŒUSERæˆ–ADMIN) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":[{"id":1,"username":"test","email":"test@example.com","role":"USER","maxBorrowCount":5,"borrowedCount":2,"createdAt":"2024-01-01T00:00:00.000Z"},{"id":2,"username":"admin","email":"admin@example.com","role":"ADMIN","maxBorrowCount":10,"borrowedCount":0,"createdAt":"2024-01-02T00:00:00.000Z"},...]},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— æƒé™:<br>`{"code":403,"message":"æ— æƒè®¿é—®","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç©ºåˆ—è¡¨:<br>`{"code":200,"message":"æˆåŠŸ","data":[],"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 1.5 è·å–ç”¨æˆ·è¯¦æƒ…æ¥å£

| æ–¹æ³• | ç«¯ç‚¹              | æƒé™            | æè¿°         | è¯·æ±‚å‚æ•° | å‚æ•°è¯´æ˜               | å“åº”æ ¼å¼                                                     |
| ---- | ----------------- | --------------- | ------------ | -------- | ---------------------- | ------------------------------------------------------------ |
| GET  | `/api/users/{id}` | ç”¨æˆ·è‡ªå·±æˆ–ADMIN | è·å–ç”¨æˆ·è¯¦æƒ… | -        | URLå‚æ•°:<br>id: ç”¨æˆ·ID | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":{"id":1,"username":"test","email":"test@example.com","role":"USER","maxBorrowCount":5,"borrowedCount":2,"createdAt":"2024-01-01T00:00:00.000Z","updatedAt":"2024-01-01T00:00:00.000Z"}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç”¨æˆ·ä¸å­˜åœ¨:<br>`{"code":404,"message":"ç”¨æˆ·ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— æƒè®¿é—®:<br>`{"code":403,"message":"æ— æƒè®¿é—®å…¶ä»–ç”¨æˆ·ä¿¡æ¯","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 1.6 æ›´æ–°ç”¨æˆ·ä¿¡æ¯æ¥å£

| æ–¹æ³• | ç«¯ç‚¹              | æƒé™            | æè¿°         | è¯·æ±‚ä½“æ ¼å¼                                        | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | ----------------- | --------------- | ------------ | ------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| PUT  | `/api/users/{id}` | ç”¨æˆ·è‡ªå·±æˆ–ADMIN | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | `{"email":"new@example.com","maxBorrowCount":10}` | email: æ–°é‚®ç®±(å¯é€‰)<br>maxBorrowCount: æœ€å¤§å€Ÿé˜…æ•°é‡(å¯é€‰ï¼Œå¿…é¡»å¤§äºç­‰äºå½“å‰å€Ÿé˜…æ•°é‡) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æ›´æ–°æˆåŠŸ","data":{"id":1,"username":"test","email":"new@example.com","role":"USER","maxBorrowCount":10,"borrowedCount":2,"updatedAt":"2024-01-01T00:00:00.000Z"}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç”¨æˆ·ä¸å­˜åœ¨:<br>`{"code":404,"message":"ç”¨æˆ·ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— æƒä¿®æ”¹:<br>`{"code":403,"message":"æ— æƒä¿®æ”¹å…¶ä»–ç”¨æˆ·ä¿¡æ¯","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å‚æ•°é”™è¯¯:<br>`{"code":400,"message":"æœ€å¤§å€Ÿé˜…æ•°é‡ä¸èƒ½å°äºå½“å‰å€Ÿé˜…æ•°é‡","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

---

## 2. å›¾ä¹¦ç®¡ç†æ¥å£

### 2.1 è·å–å›¾ä¹¦åˆ—è¡¨æ¥å£ï¼ˆå‰ç«¯åˆ†é¡µï¼‰

| æ–¹æ³• | ç«¯ç‚¹         | æƒé™   | æè¿°                      | è¯·æ±‚å‚æ•°                                           | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | ------------ | ------ | ------------------------- | -------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| GET  | `/api/books` | æ‰€æœ‰äºº | è·å–å›¾ä¹¦åˆ—è¡¨ï¼ˆæœç´¢+ç­›é€‰ï¼‰ | `title=çº¢&author=æ›¹&category=1&availableOnly=true` | title: ä¹¦åæœç´¢(å¯é€‰ï¼Œæ¨¡ç³ŠåŒ¹é…)<br>author: ä½œè€…æœç´¢(å¯é€‰ï¼Œæ¨¡ç³ŠåŒ¹é…)<br>category: åˆ†ç±»IDç­›é€‰(å¯é€‰ï¼Œ1-10)<br>availableOnly: ä»…æ˜¾ç¤ºæœ‰åº“å­˜çš„å›¾ä¹¦(å¯é€‰ï¼Œtrue/false) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":[{"id":1,"isbn":"978-7-5354-1234-5","title":"çº¢æ¥¼æ¢¦","author":"æ›¹é›ªèŠ¹","publisher":"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾","publishYear":2020,"category":1,"totalCopies":5,"availableCopies":3,"location":"AåŒº3æ’2æ¶","description":"ä¸­å›½å¤å…¸æ–‡å­¦åè‘—","createdAt":"2024-01-01T00:00:00.000Z","updatedAt":"2024-01-01T00:00:00.000Z"},{"id":2,"isbn":"978-7-02-001501-6","title":"ä¸‰å›½æ¼”ä¹‰","author":"ç½—è´¯ä¸­","publisher":"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾","publishYear":2019,"category":1,"totalCopies":3,"availableCopies":1,"location":"AåŒº2æ’1æ¶","description":"ä¸­å›½å¤ä»£å†å²å°è¯´","createdAt":"2024-01-02T00:00:00.000Z","updatedAt":"2024-01-02T00:00:00.000Z"},...]},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å‚æ•°é”™è¯¯:<br>`{"code":400,"message":"åˆ†ç±»IDå¿…é¡»åœ¨1-10ä¹‹é—´","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç©ºåˆ—è¡¨:<br>`{"code":200,"message":"æˆåŠŸ","data":[],"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 2.2 è·å–å›¾ä¹¦è¯¦æƒ…æ¥å£

| æ–¹æ³• | ç«¯ç‚¹              | æƒé™   | æè¿°         | è¯·æ±‚å‚æ•° | å‚æ•°è¯´æ˜               | å“åº”æ ¼å¼                                                     |
| ---- | ----------------- | ------ | ------------ | -------- | ---------------------- | ------------------------------------------------------------ |
| GET  | `/api/books/{id}` | æ‰€æœ‰äºº | è·å–å›¾ä¹¦è¯¦æƒ… | -        | URLå‚æ•°:<br>id: å›¾ä¹¦ID | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":{"id":1,"isbn":"978-7-5354-1234-5","title":"çº¢æ¥¼æ¢¦","author":"æ›¹é›ªèŠ¹","publisher":"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾","publishYear":2020,"category":1,"totalCopies":5,"availableCopies":3,"location":"AåŒº3æ’2æ¶","description":"ä¸­å›½å¤å…¸æ–‡å­¦åè‘—ï¼Œæ¸…ä»£ä½œå®¶æ›¹é›ªèŠ¹åˆ›ä½œçš„é•¿ç¯‡ç« å›ä½“å°è¯´ã€‚","createdAt":"2024-01-01T00:00:00.000Z","updatedAt":"2024-01-01T00:00:00.000Z"}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å›¾ä¹¦ä¸å­˜åœ¨:<br>`{"code":404,"message":"å›¾ä¹¦ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 2.3 æ·»åŠ å›¾ä¹¦æ¥å£

| æ–¹æ³• | ç«¯ç‚¹         | æƒé™  | æè¿°     | è¯·æ±‚ä½“æ ¼å¼                                                   | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | ------------ | ----- | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| POST | `/api/books` | ADMIN | æ·»åŠ å›¾ä¹¦ | `{"isbn":"978-7-5354-1234-5","title":"çº¢æ¥¼æ¢¦","author":"æ›¹é›ªèŠ¹","publisher":"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾","publishYear":2020,"category":1,"totalCopies":5,"availableCopies":5,"location":"AåŒº3æ’2æ¶","description":"ä¸­å›½å¤å…¸æ–‡å­¦åè‘—"}` | isbn: ISBNå·(å¿…å¡«ï¼Œå”¯ä¸€)<br>title: ä¹¦å(å¿…å¡«)<br>author: ä½œè€…(å¿…å¡«)<br>publisher: å‡ºç‰ˆç¤¾(å¯é€‰)<br>publishYear: å‡ºç‰ˆå¹´ä»½(å¯é€‰)<br>category: åˆ†ç±»ID(å¿…å¡«ï¼Œ1-10)<br>totalCopies: æ€»å‰¯æœ¬æ•°(å¯é€‰ï¼Œé»˜è®¤1ï¼Œå¿…é¡»å¤§äº0)<br>availableCopies: å¯ç”¨å‰¯æœ¬æ•°(å¯é€‰ï¼Œé»˜è®¤ç­‰äºtotalCopies)<br>location: å­˜æ”¾ä½ç½®(å¯é€‰)<br>description: æè¿°(å¯é€‰) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"å›¾ä¹¦æ·»åŠ æˆåŠŸ","data":{"id":1,"isbn":"978-7-5354-1234-5","title":"çº¢æ¥¼æ¢¦","author":"æ›¹é›ªèŠ¹","publisher":"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾","publishYear":2020,"category":1,"totalCopies":5,"availableCopies":5,"location":"AåŒº3æ’2æ¶","description":"ä¸­å›½å¤å…¸æ–‡å­¦åè‘—","createdAt":"2024-01-01T00:00:00.000Z","updatedAt":"2024-01-01T00:00:00.000Z"}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ISBNå·²å­˜åœ¨:<br>`{"code":400,"message":"ISBNå·²å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>åˆ†ç±»IDæ— æ•ˆ:<br>`{"code":400,"message":"åˆ†ç±»IDæ— æ•ˆï¼Œå¿…é¡»åœ¨1-10ä¹‹é—´","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å‚æ•°é”™è¯¯:<br>`{"code":400,"message":"ä¹¦åä¸èƒ½ä¸ºç©º","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 2.4 æ›´æ–°å›¾ä¹¦ä¿¡æ¯æ¥å£

| æ–¹æ³• | ç«¯ç‚¹              | æƒé™  | æè¿°         | è¯·æ±‚ä½“æ ¼å¼                                                   | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | ----------------- | ----- | ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| PUT  | `/api/books/{id}` | ADMIN | æ›´æ–°å›¾ä¹¦ä¿¡æ¯ | `{"title":"æ–°ä¹¦å","author":"æ–°ä½œè€…","category":2,"availableCopies":2}` | title: ä¹¦å(å¯é€‰)<br>author: ä½œè€…(å¯é€‰)<br>publisher: å‡ºç‰ˆç¤¾(å¯é€‰)<br>publishYear: å‡ºç‰ˆå¹´ä»½(å¯é€‰)<br>category: åˆ†ç±»ID(å¯é€‰ï¼Œ1-10)<br>totalCopies: æ€»å‰¯æœ¬æ•°(å¯é€‰ï¼Œå¿…é¡»å¤§äºç­‰äºavailableCopies)<br>availableCopies: å¯ç”¨å‰¯æœ¬æ•°(å¯é€‰ï¼Œä¸èƒ½å¤§äºtotalCopies)<br>location: å­˜æ”¾ä½ç½®(å¯é€‰)<br>description: æè¿°(å¯é€‰) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æ›´æ–°æˆåŠŸ","data":{"id":1,"isbn":"978-7-5354-1234-5","title":"æ–°ä¹¦å","author":"æ–°ä½œè€…","publisher":"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾","publishYear":2020,"category":2,"totalCopies":5,"availableCopies":2,"location":"AåŒº3æ’2æ¶","description":"ä¸­å›½å¤å…¸æ–‡å­¦åè‘—","updatedAt":"2024-01-01T00:00:00.000Z"}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å›¾ä¹¦ä¸å­˜åœ¨:<br>`{"code":404,"message":"å›¾ä¹¦ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å‚æ•°é”™è¯¯:<br>`{"code":400,"message":"å¯ç”¨å‰¯æœ¬æ•°ä¸èƒ½å¤§äºæ€»å‰¯æœ¬æ•°","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>åˆ†ç±»IDæ— æ•ˆ:<br>`{"code":400,"message":"åˆ†ç±»IDæ— æ•ˆï¼Œå¿…é¡»åœ¨1-10ä¹‹é—´","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 2.5 åˆ é™¤å›¾ä¹¦æ¥å£

| æ–¹æ³•   | ç«¯ç‚¹              | æƒé™  | æè¿°     | è¯·æ±‚å‚æ•° | å‚æ•°è¯´æ˜               | å“åº”æ ¼å¼                                                     |
| ------ | ----------------- | ----- | -------- | -------- | ---------------------- | ------------------------------------------------------------ |
| DELETE | `/api/books/{id}` | ADMIN | åˆ é™¤å›¾ä¹¦ | -        | URLå‚æ•°:<br>id: å›¾ä¹¦ID | æˆåŠŸå“åº”:<br>`{"code":200,"message":"åˆ é™¤æˆåŠŸ","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å›¾ä¹¦ä¸å­˜åœ¨:<br>`{"code":404,"message":"å›¾ä¹¦ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å›¾ä¹¦å·²è¢«å€Ÿé˜…:<br>`{"code":400,"message":"å›¾ä¹¦å·²è¢«å€Ÿé˜…ï¼Œæ— æ³•åˆ é™¤","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br> |

### 2.6 æœç´¢å›¾ä¹¦æ¥å£

| æ–¹æ³• | ç«¯ç‚¹                | æƒé™   | æè¿°                     | è¯·æ±‚å‚æ•°               | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | ------------------- | ------ | ------------------------ | ---------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| GET  | `/api/books/search` | æ‰€æœ‰äºº | æœç´¢å›¾ä¹¦ï¼ˆç”¨äºå¿«é€Ÿæœç´¢ï¼‰ | `q=çº¢æ¥¼æ¢¦&field=title` | q: æœç´¢å…³é”®è¯(å¿…å¡«)<br>field: æœç´¢å­—æ®µ(title/author/isbn,é»˜è®¤title) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":[{"id":1,"isbn":"978-7-5354-1234-5","title":"çº¢æ¥¼æ¢¦","author":"æ›¹é›ªèŠ¹","publisher":"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾","publishYear":2020,"category":1,"availableCopies":3},{"id":2,"isbn":"978-7-5354-1235-2","title":"çº¢æ¥¼æ¢¦ç»­","author":"æ›¹é›ªèŠ¹","publisher":"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾","publishYear":2021,"category":1,"availableCopies":2}]},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— ç»“æœ:<br>`{"code":200,"message":"æˆåŠŸ","data":[],"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å‚æ•°é”™è¯¯:<br>`{"code":400,"message":"æœç´¢å…³é”®è¯ä¸èƒ½ä¸ºç©º","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å­—æ®µé”™è¯¯:<br>`{"code":400,"message":"æœç´¢å­—æ®µå¿…é¡»æ˜¯titleã€authoræˆ–isbn","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 3. å€Ÿé˜…ç®¡ç†æ¥å£

### 3.1 å€Ÿä¹¦æ¥å£

| æ–¹æ³• | ç«¯ç‚¹          | æƒé™  | æè¿°             | è¯·æ±‚ä½“æ ¼å¼                | å‚æ•°è¯´æ˜                                     | å“åº”æ ¼å¼                                                     |
| ---- | ------------- | ----- | ---------------- | ------------------------- | -------------------------------------------- | ------------------------------------------------------------ |
| POST | `/api/borrow` | ADMIN | ç®¡ç†å‘˜ä¸ºç”¨æˆ·å€Ÿä¹¦ | `{"userId":1,"bookId":2}` | userId: ç”¨æˆ·ID(å¿…å¡«)<br>bookId: å›¾ä¹¦ID(å¿…å¡«) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"å€Ÿä¹¦æˆåŠŸ","data":{"recordId":1,"bookId":2,"userId":1,"bookTitle":"çº¢æ¥¼æ¢¦","userName":"å¼ ä¸‰","borrowDate":"2024-01-01T00:00:00.000Z","dueDate":"2024-01-31T00:00:00.000Z","status":"BORROWED"}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç”¨æˆ·å·²è¾¾æœ€å¤§å€Ÿé˜…æ•°:<br>`{"code":400,"message":"ç”¨æˆ·å·²è¾¾åˆ°æœ€å¤§å€Ÿé˜…æ•°é‡","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å›¾ä¹¦æ— åº“å­˜:<br>`{"code":400,"message":"å›¾ä¹¦åº“å­˜ä¸è¶³","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç”¨æˆ·ä¸å­˜åœ¨:<br>`{"code":404,"message":"ç”¨æˆ·ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å›¾ä¹¦ä¸å­˜åœ¨:<br>`{"code":404,"message":"å›¾ä¹¦ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å‚æ•°é”™è¯¯:<br>`{"code":400,"message":"ç”¨æˆ·IDå’Œå›¾ä¹¦IDä¸èƒ½ä¸ºç©º","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 3.2 è¿˜ä¹¦æ¥å£

| æ–¹æ³• | ç«¯ç‚¹                            | æƒé™  | æè¿°     | è¯·æ±‚å‚æ•° | å‚æ•°è¯´æ˜                         | å“åº”æ ¼å¼                                                     |
| ---- | ------------------------------- | ----- | -------- | -------- | -------------------------------- | ------------------------------------------------------------ |
| POST | `/api/borrow/{recordId}/return` | ADMIN | å½’è¿˜å›¾ä¹¦ | -        | URLå‚æ•°:<br>recordId: å€Ÿé˜…è®°å½•ID | æˆåŠŸå“åº”:<br>`{"code":200,"message":"è¿˜ä¹¦æˆåŠŸ","data":{"recordId":1,"bookId":2,"userId":1,"bookTitle":"çº¢æ¥¼æ¢¦","userName":"å¼ ä¸‰","borrowDate":"2024-01-01T00:00:00.000Z","returnDate":"2024-01-15T00:00:00.000Z","status":"RETURNED"}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å€Ÿé˜…è®°å½•ä¸å­˜åœ¨:<br>`{"code":404,"message":"å€Ÿé˜…è®°å½•ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å›¾ä¹¦å·²å½’è¿˜:<br>`{"code":400,"message":"å›¾ä¹¦å·²å½’è¿˜","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— æƒé™:<br>`{"code":403,"message":"æ— æƒæ“ä½œ","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 3.3 ç»­å€Ÿæ¥å£

| æ–¹æ³• | ç«¯ç‚¹                           | æƒé™   | æè¿°         | è¯·æ±‚å‚æ•° | å‚æ•°è¯´æ˜                         | å“åº”æ ¼å¼                                                     |
| ---- | ------------------------------ | ------ | ------------ | -------- | -------------------------------- | ------------------------------------------------------------ |
| POST | `/api/borrow/{recordId}/renew` | å€Ÿé˜…è€… | ç”¨æˆ·ç»­å€Ÿå›¾ä¹¦ | -        | URLå‚æ•°:<br>recordId: å€Ÿé˜…è®°å½•ID | æˆåŠŸå“åº”:<br>`{"code":200,"message":"ç»­å€ŸæˆåŠŸ","data":{"recordId":1,"newDueDate":"2024-02-14T00:00:00.000Z","renewedCount":1,"maxRenewCount":1}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å·²è¾¾åˆ°æœ€å¤§ç»­å€Ÿæ¬¡æ•°:<br>`{"code":400,"message":"å·²è¾¾åˆ°æœ€å¤§ç»­å€Ÿæ¬¡æ•°","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— æƒæ“ä½œ:<br>`{"code":403,"message":"æ— æƒæ“ä½œæ­¤å€Ÿé˜…è®°å½•","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å€Ÿé˜…è®°å½•ä¸å­˜åœ¨:<br>`{"code":404,"message":"å€Ÿé˜…è®°å½•ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>å›¾ä¹¦å·²å½’è¿˜:<br>`{"code":400,"message":"å›¾ä¹¦å·²å½’è¿˜ï¼Œä¸èƒ½ç»­å€Ÿ","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 3.4 è·å–å€Ÿé˜…è®°å½•æ¥å£ï¼ˆå‰ç«¯åˆ†é¡µï¼‰

| æ–¹æ³• | ç«¯ç‚¹                  | æƒé™                     | æè¿°         | è¯·æ±‚å‚æ•°                   | å‚æ•°è¯´æ˜                                                     | å“åº”æ ¼å¼                                                     |
| ---- | --------------------- | ------------------------ | ------------ | -------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| GET  | `/api/borrow/records` | ç®¡ç†å‘˜çœ‹å…¨éƒ¨ï¼Œç”¨æˆ·çœ‹è‡ªå·± | è·å–å€Ÿé˜…è®°å½• | `status=BORROWED&userId=1` | status: çŠ¶æ€ç­›é€‰(BORROWED/RETURNED/OVERDUEï¼Œå¯é€‰)<br>userId: ç”¨æˆ·IDç­›é€‰(ç®¡ç†å‘˜å¯ç”¨ï¼Œæ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„) | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":[{"id":1,"userId":1,"bookId":2,"userName":"å¼ ä¸‰","bookTitle":"çº¢æ¥¼æ¢¦","borrowDate":"2024-01-01T00:00:00.000Z","dueDate":"2024-01-31T00:00:00.000Z","returnDate":null,"renewedCount":0,"maxRenewCount":1,"status":"BORROWED","createdAt":"2024-01-01T00:00:00.000Z"},{"id":2,"userId":2,"bookId":3,"userName":"æå››","bookTitle":"ä¸‰å›½æ¼”ä¹‰","borrowDate":"2024-01-02T00:00:00.000Z","dueDate":"2024-02-01T00:00:00.000Z","returnDate":"2024-01-20T00:00:00.000Z","renewedCount":0,"maxRenewCount":1,"status":"RETURNED","createdAt":"2024-01-02T00:00:00.000Z"},...]},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>çŠ¶æ€é”™è¯¯:<br>`{"code":400,"message":"çŠ¶æ€å¿…é¡»æ˜¯BORROWEDã€RETURNEDæˆ–OVERDUE","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>ç©ºåˆ—è¡¨:<br>`{"code":200,"message":"æˆåŠŸ","data":[],"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 3.5 è·å–å€Ÿé˜…è®°å½•è¯¦æƒ…æ¥å£

| æ–¹æ³• | ç«¯ç‚¹                       | æƒé™            | æè¿°             | è¯·æ±‚å‚æ•° | å‚æ•°è¯´æ˜                   | å“åº”æ ¼å¼                                                     |
| ---- | -------------------------- | --------------- | ---------------- | -------- | -------------------------- | ------------------------------------------------------------ |
| GET  | `/api/borrow/records/{id}` | ç›¸å…³ç”¨æˆ·æˆ–ADMIN | è·å–å€Ÿé˜…è®°å½•è¯¦æƒ… | -        | URLå‚æ•°:<br>id: å€Ÿé˜…è®°å½•ID | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":{"id":1,"userId":1,"bookId":2,"userName":"å¼ ä¸‰","userEmail":"zhangsan@example.com","bookTitle":"çº¢æ¥¼æ¢¦","bookIsbn":"978-7-5354-1234-5","borrowDate":"2024-01-01T00:00:00.000Z","dueDate":"2024-01-31T00:00:00.000Z","returnDate":null,"renewedCount":0,"maxRenewCount":1,"status":"BORROWED","createdAt":"2024-01-01T00:00:00.000Z","updatedAt":"2024-01-01T00:00:00.000Z"}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>è®°å½•ä¸å­˜åœ¨:<br>`{"code":404,"message":"å€Ÿé˜…è®°å½•ä¸å­˜åœ¨","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— æƒè®¿é—®:<br>`{"code":403,"message":"æ— æƒè®¿é—®æ­¤å€Ÿé˜…è®°å½•","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 3.6 è·å–é€¾æœŸå€Ÿé˜…è®°å½•æ¥å£ï¼ˆå‰ç«¯åˆ†é¡µï¼‰

| æ–¹æ³• | ç«¯ç‚¹                  | æƒé™  | æè¿°             | è¯·æ±‚å‚æ•° | å‚æ•°è¯´æ˜ | å“åº”æ ¼å¼                                                     |
| ---- | --------------------- | ----- | ---------------- | -------- | -------- | ------------------------------------------------------------ |
| GET  | `/api/borrow/overdue` | ADMIN | è·å–é€¾æœŸå€Ÿé˜…è®°å½• | -        | -        | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":[{"id":3,"userId":3,"bookId":4,"userName":"ç‹äº”","bookTitle":"è¥¿æ¸¸è®°","borrowDate":"2023-12-01T00:00:00.000Z","dueDate":"2023-12-31T00:00:00.000Z","overdueDays":1,"status":"OVERDUE","createdAt":"2023-12-01T00:00:00.000Z"},...]},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— é€¾æœŸè®°å½•:<br>`{"code":200,"message":"æˆåŠŸ","data":[],"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— æƒé™:<br>`{"code":403,"message":"æ— æƒè®¿é—®","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

### 3.7 è·å–å€Ÿé˜…ç»Ÿè®¡æ¥å£

| æ–¹æ³• | ç«¯ç‚¹                | æƒé™  | æè¿°         | è¯·æ±‚å‚æ•° | å‚æ•°è¯´æ˜ | å“åº”æ ¼å¼                                                     |
| ---- | ------------------- | ----- | ------------ | -------- | -------- | ------------------------------------------------------------ |
| GET  | `/api/borrow/stats` | ADMIN | è·å–å€Ÿé˜…ç»Ÿè®¡ | -        | -        | æˆåŠŸå“åº”:<br>`{"code":200,"message":"æˆåŠŸ","data":{"totalUsers":100,"totalBooks":500,"totalBorrowed":50,"totalOverdue":5,"todayBorrowed":3,"todayReturned":2,"popularBooks":[{"bookId":1,"bookTitle":"çº¢æ¥¼æ¢¦","borrowCount":20},{"bookId":2,"bookTitle":"ä¸‰å›½æ¼”ä¹‰","borrowCount":15}],"popularCategories":[{"category":1,"categoryName":"æ–‡å­¦","count":30},{"category":2,"categoryName":"å†å²","count":20}]}},"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æ— æƒé™:<br>`{"code":403,"message":"æ— æƒè®¿é—®","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}`<br><br>æœåŠ¡é”™è¯¯:<br>`{"code":500,"message":"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯","data":null,"timestamp":"2024-01-01T00:00:00.000Z"}` |

---

## ğŸ”§ ä¸‰ã€æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

### 1. è‡ªåŠ¨å€Ÿä¹¦é€»è¾‘

```java
// å€Ÿä¹¦æ¥å£çš„ä¸šåŠ¡é€»è¾‘
1. éªŒè¯ç®¡ç†å‘˜æƒé™
2. è·å–ç”¨æˆ·å’Œä¹¦ç±ä¿¡æ¯
3. æ£€æŸ¥ç”¨æˆ·ï¼šborrowed_count < max_borrow_count
4. æ£€æŸ¥ä¹¦ç±ï¼šavailable_copies > 0
5. å¦‚æœæ£€æŸ¥é€šè¿‡ï¼š
   a. åˆ›å»ºå€Ÿé˜…è®°å½•
      - borrow_date = å½“å‰æ—¶é—´
      - due_date = å½“å‰æ—¶é—´ + 30å¤©
      - status = 'BORROWED'
   b. æ›´æ–°ç”¨æˆ·ï¼šborrowed_count + 1
   c. æ›´æ–°ä¹¦ç±ï¼šavailable_copies - 1
6. è¿”å›å€Ÿé˜…æˆåŠŸ
```

### 2. è‡ªåŠ¨è¿˜ä¹¦é€»è¾‘

```java
// è¿˜ä¹¦æ¥å£çš„ä¸šåŠ¡é€»è¾‘
1. éªŒè¯ç®¡ç†å‘˜æƒé™
2. è·å–å€Ÿé˜…è®°å½•ï¼ˆå¿…é¡»æ˜¯BORROWEDçŠ¶æ€ï¼‰
3. æ›´æ–°å€Ÿé˜…è®°å½•ï¼š
   a. return_date = å½“å‰æ—¶é—´
   b. status = 'RETURNED'
4. æ›´æ–°ç”¨æˆ·ï¼šborrowed_count - 1
5. æ›´æ–°ä¹¦ç±ï¼šavailable_copies + 1
6. å¦‚æœå½“å‰æ—¶é—´ > due_dateï¼š
   a. è®¡ç®—é€¾æœŸå¤©æ•°
   b. å¯ä»¥è®°å½•é€¾æœŸä¿¡æ¯ï¼ˆä½†ä¸éœ€è¦ä¿¡ç”¨åˆ†ç³»ç»Ÿï¼‰
7. è¿”å›è¿˜ä¹¦æˆåŠŸ
```

### 3. ç»­å€Ÿé€»è¾‘

```java
// ç»­å€Ÿæ¥å£çš„ä¸šåŠ¡é€»è¾‘
1. éªŒè¯ç”¨æˆ·æƒé™ï¼ˆå¿…é¡»æ˜¯å€Ÿé˜…è€…æœ¬äººï¼‰
2. è·å–å€Ÿé˜…è®°å½•ï¼ˆå¿…é¡»æ˜¯BORROWEDçŠ¶æ€ï¼‰
3. æ£€æŸ¥ï¼šrenewed_count < max_renew_count
4. å¦‚æœæ£€æŸ¥é€šè¿‡ï¼š
   a. æ›´æ–°due_date = åŸdue_date + 15å¤©
   b. renewed_count + 1
5. è¿”å›ç»­å€ŸæˆåŠŸ
```

## ğŸš€ å››ã€æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Spring Boot
- **å®‰å…¨**: Spring Security + JWTï¼ˆç”¨äºAPIé‰´æƒï¼‰
- **æ•°æ®åº“**: MySQL
- **ORM**: MyBatis Plus
- **æ„å»ºå·¥å…·**: Maven
- **APIæ–‡æ¡£**: Swagger
